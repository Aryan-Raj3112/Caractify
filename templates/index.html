{% extends "layout.html" %}
{% block content %}
<div class="chat-container">
    <h2 style="text-align: center;">Chat with Gemini</h2>
    <div class="chat-box">
        <!-- Flask will render the chat history here -->
        {% if chat_history %}
            {% for message in chat_history %}
                <div class="{{ message['role'] }}-msg">
                    <strong>{{ message['role'] }}:</strong> {{ message['parts'] }}
                </div>
            {% endfor %}
        {% else %}
            <div class="model-msg">
                <strong>model:</strong> Hello! How can I assist you today?
            </div>
        {% endif %}
    </div>

    <!-- Form to send messages -->
    <form action="/chat" method="POST">
        <input autocomplete="off" autofocus type="text" name="message" placeholder="Enter your message" required>
        <button type="submit">Send</button>
    </form>

    <!-- Form to reset conversation history -->
    <form action="/reset" method="POST">
        <button id="resetButton" type="submit">Reset chat</button>
    </form>
</div>
{% endblock %}